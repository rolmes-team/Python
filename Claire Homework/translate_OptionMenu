import tkinter as tk
from tkinter import *
from gtts import gTTS
from pygame import mixer # Load the required library to play
import os
from translate import Translator

class IngredientAdder(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.geometry("200x200+0+0")
        self.init_gui()

    # function to add new ingredients
    def add_ingredient_entry(self):
        entry = tk.Entry(self)
        entry.pack(side=tk.TOP)
        self.ingredient_entries.append(entry)

    # get contents of all entry boxes
    def save_recipe(self):
        for ingredient in self.ingredient_entries:
              x = ingredient.get()
                
        translator= Translator(from_lang = 'zh',to_lang=self.var.get())
        translation = translator.translate(x)
        
                
        tts = gTTS(text=translation, lang=self.var.get())
        tts.save("g1.mp3")   
        print (ingredient.get())
        print (translation)  
        mixer.init()
        mixer.music.load(r'C:\Users\user\g1.mp3')
        mixer.music.play()
        print ("[朕懂了]")
        
    def print_lan(self):
        print (self.var.get())
       
        
    # build initial widgets 
    def init_gui(self):

        # this is a list of ingredients entry boxes
        self.ingredient_entries = []

        # put a label at the top of the window and anchor it there
        #tk.Label(self,text="我只會中文").pack(anchor=tk.N,side=tk.TOP)
        
        self.var = StringVar()
        self.var.set("請選擇語言")
        tk.OptionMenu(self, self.var, "ko", "ja", "en").pack(anchor=tk.N,side=tk.TOP)
               
        
        # Put these two buttons at the bottom of the window and anchor them there
        tk.Button(self,text="送出",command=self.save_recipe).pack(anchor=tk.S,side=tk.BOTTOM)
       
        # new ingredients will be added between the label and the buttons 
        self.add_ingredient_entry()

cookbook = IngredientAdder()
cookbook.mainloop()
